{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hengs/Desktop/fyp/frontend/app/report/%5Btoken%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function ReportViewPage() {\r\n  const { token } = useParams();\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const [report, setReport] = useState<any>(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(`http://192.168.100.66:4000/api/report/${token}`)\r\n      .then((res) =>\r\n        res.ok ? res.json() : Promise.reject(\"Invalid or expired link\")\r\n      )\r\n      .then(setReport)\r\n      .catch(() => setError(\"This link is invalid or has already been used.\"));\r\n  }, [token]);\r\n\r\n  if (error) return <div className=\"text-red-500\">{error}</div>;\r\n  if (!report) return <div>Loading...</div>;\r\n\r\n  const student = report.student || {};\r\n  const score = report.score || {};\r\n  const subjects = Object.entries(score).filter(\r\n    ([key]) => ![\"rank\", \"grade\", \"total\", \"average\", \"absent\"].includes(key)\r\n  );\r\n\r\n  return (\r\n    <div className=\"max-w-xs mx-auto bg-white rounded-2xl shadow-lg p-4 mt-4 border-2 border-blue-100 font-[Kantumruy]\">\r\n      {/* Logo */}\r\n      <div className=\"flex items-center gap-2 mb-2\">\r\n        <Image\r\n          src=\"/icons/admin/logo.svg\"\r\n          alt=\"EdGrade\"\r\n          width={32}\r\n          height={32}\r\n          className=\"w-8 h-8\"\r\n        />\r\n        <span className=\"text-[#25388C] font-bold text-2xl\">EdGrade</span>\r\n      </div>\r\n      <hr className=\"my-2 border-dotted border-gray-300\" />\r\n\r\n      {/* Avatar and Info */}\r\n      <div className=\"flex items-center gap-4 mb-4\">\r\n        <div className=\"w-24 h-24 rounded-full bg-orange-200 overflow-hidden flex items-center justify-center border-4 border-white shadow\">\r\n          {student.avatar ? (\r\n            <Image\r\n              src={\r\n                student.avatar.startsWith(\"http\") || student.avatar.startsWith(\"data:\")\r\n                  ? student.avatar\r\n                  : `https://ik.imagekit.io/edgrade/${student.avatar}`\r\n              }\r\n              alt={student.name || \"Student\"}\r\n              width={96}\r\n              height={96}\r\n              className=\"w-24 h-24 object-cover rounded-full\"\r\n              unoptimized\r\n            />\r\n          ) : (\r\n            <span className=\"text-4xl font-bold text-white select-none\">\r\n              {student.name\r\n                ? student.name\r\n                    .split(\" \")\r\n                    .map((n: string) => n[0])\r\n                    .join(\"\")\r\n                    .toUpperCase()\r\n                : \"?\"}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <div className=\"font-bold\">\r\n          <div>ឈ្មោះ: {student.name || \"-\"}</div>\r\n          <div>{student.gender || \"\"}</div>\r\n          <div className=\"text-xs\">{student.id || \"\"}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"bg-gray-600 text-white px-3 py-2 rounded-t font-bold\">\r\n        Suject\r\n      </div>\r\n      <table className=\"w-full border-collapse\">\r\n        <tbody>\r\n          {subjects.map(([subject, value], idx) => (\r\n            <tr key={subject} className={idx % 2 === 0 ? \"bg-gray-100\" : \"\"}>\r\n              <td className=\"px-2 py-1 text-[15px]\">{subject}</td>\r\n              <td className=\"px-2 py-1 text-right\">{String(value)}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Summary */}\r\n      <div className=\"flex justify-between mt-4 text-[15px]\">\r\n        <div>\r\n          <div>\r\n            និទ្ទេស: <span className=\"font-bold\">{score.grade || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            អវត្តមាន: <span className=\"font-bold\">{score.absent || \"0\"}</span>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <div>\r\n            ចំនួនតម្លៃ: <span className=\"font-bold\">{score.total || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            សិស្សសរុប: <span className=\"font-bold\">{score.rank || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            មធ្យមសិក្សា:{\" \"}\r\n            <span className=\"font-bold\">{score.average || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            Rank: <span className=\"font-bold\">{score.rank || \"-\"}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}