(()=>{var e={};e.id=28,e.ids=[28],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1860:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(2688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2067:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=t(5239),a=t(8088),o=t(8170),n=t.n(o),l=t(893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);t.d(s,i);let d={children:["",{children:["(dashboard)",{children:["school",{children:["classrooms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3623)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6675)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,8014)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/school/classrooms/page",pathname:"/school/classrooms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2560:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(687),a=t(3210),o=t(7175);let n=(0,t(2688).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var l=t(4219),i=t(9384),d=t(9556),c=t(5814),m=t.n(c),h=t(3921);function x({classrooms:e,setClassrooms:s}){let[t,c]=(0,a.useState)(1),x=Math.ceil(e.length/8),p=(t-1)*8,u=e.slice(p,p+8),[f,b]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),C=(0,a.useRef)(null),{t:k}=(0,h.o)(),P=e=>{y(e),w(e.name),b(!0)},A=e=>{y(e),v(!0)},_=async()=>{if(j){try{await (0,d.fi)(j.id,N),s(e=>e.map(e=>e.id===j.id?{...e,name:N}:e))}catch(e){console.error(e)}b(!1)}},z=async()=>{if(j){try{await (0,d.Ko)(j.id),s(e=>e.filter(e=>e.id!==j.id))}catch(e){console.error(e)}v(!1)}};return(0,r.jsxs)("div",{className:"space-y-4 relative",children:[(0,r.jsx)("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:(0,r.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-50 text-gray-600 uppercase text-xs hidden sm:table-header-group",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4",children:k("classroomName")}),(0,r.jsx)("th",{className:"px-6 py-4",children:k("totalStudents")}),(0,r.jsx)("th",{className:"px-6 py-4",children:k("view")}),(0,r.jsx)("th",{className:"px-6 py-4",children:k("action")})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 bg-white",children:u.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:(0,i.A)("w-8 h-8 rounded-full text-white flex items-center justify-center font-bold",e.color),children:e.name.charAt(0)}),(0,r.jsx)("div",{className:"text-sm font-medium",children:e.name})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.totalStudents}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(m(),{href:`/school/classrooms/${e.id}`,className:"text-blue-600 hover:underline cursor-pointer",children:k("viewClassroom")})}),(0,r.jsxs)("td",{className:"px-6 py-4 flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>P(e),className:"text-blue-500 hover:text-blue-700",children:(0,r.jsx)(o.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>A(e),className:"text-orange-500 hover:text-orange-600",children:(0,r.jsx)(n,{size:18})})]})]},e.id))})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 justify-center mt-4",children:[(0,r.jsx)(l.$,{className:"bg-[#25388C] hover:bg-[#1e2e6d]",onClick:()=>c(e=>Math.max(e-1,1)),disabled:1===t,children:k("previous")}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[k("page")," ",t," ",k("of")," ",x]}),(0,r.jsx)(l.$,{className:"bg-[#25388C] hover:bg-[#1e2e6d]",onClick:()=>c(e=>Math.min(e+1,x)),disabled:t===x,children:k("next")})]}),f&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",onClick:e=>{C.current&&!C.current.contains(e.target)&&b(!1)},children:(0,r.jsxs)("div",{ref:C,className:"bg-white p-6 rounded-lg shadow-md w-[90%] max-w-md",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)("h2",{className:"font-semibold text-lg",children:k("editClassroomName")})}),(0,r.jsx)("input",{className:"w-full px-4 py-2 border rounded-md mb-4",value:N,onChange:e=>w(e.target.value)}),(0,r.jsx)(l.$,{onClick:_,className:"w-full bg-[#25388C] hover:bg-[#1e2e6d]",children:k("save")})]})}),g&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md w-[90%] max-w-sm text-center",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800 mb-6",children:k("archiveConfirm")}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,r.jsx)(l.$,{variant:"secondary",onClick:()=>v(!1),children:k("cancel")}),(0,r.jsx)(l.$,{variant:"destructive",onClick:z,children:k("confirm")})]})]})})]})}var p=t(1860);let u=["bg-green-600","bg-blue-500","bg-amber-600","bg-rose-500","bg-sky-600","bg-neutral-800","bg-purple-600","bg-yellow-500","bg-teal-500","bg-indigo-600"];function f({classrooms:e,setClassrooms:s}){let[t,o]=(0,a.useState)(!1),[n,i]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),x=(0,a.useRef)(null),{t:f}=(0,h.o)(),b=async()=>{let t=n.trim();if(""===t)return void m(f("classroomNameCannotBeEmpty"));if(e.some(e=>e.name.toLowerCase()===t.toLowerCase()))return void m(f("classroomNameAlreadyExists"));let r=u[Math.floor(Math.random()*u.length)];s([...e,await (0,d.ot)({name:t,color:r})]),o(!1),i("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.$,{onClick:()=>o(!0),className:"bg-[#25388C] hover:bg-[#1e2e6d] ",children:["+ ",f("createClassroom")]}),t&&(0,r.jsx)("div",{onClick:e=>{x.current&&!x.current.contains(e.target)&&o(!1)},className:"fixed inset-0 flex justify-center items-center z-50 bg-black/30 backdrop-blur-sm",children:(0,r.jsxs)("div",{ref:x,className:"bg-white rounded-xl p-6 shadow-lg relative w-[370px] max-w-[90vw]",children:[(0,r.jsx)("button",{onClick:()=>o(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black","aria-label":"Close",children:(0,r.jsx)(p.A,{size:20})}),(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:f("createClassroom")}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>{i(e.target.value),m("")},placeholder:f("classroomName"),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3 focus:outline-none focus:ring-2 focus:ring-[#25388C] text-base"}),c&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-2",children:c}),(0,r.jsx)(l.$,{onClick:b,className:"bg-[#25388C] hover:bg-[#1e2e6d] text-white w-full py-2 rounded-lg text-base font-medium",children:f("save")})]})})]})}var b=t(474);let g=()=>{let[e,s]=(0,a.useState)([]),[t,o]=(0,a.useState)(!0),{t:n}=(0,h.o)();return(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,d.rq)();s(e)}catch(e){console.error("Failed to load classrooms",e)}finally{o(!1)}})()},[]),(0,r.jsxs)("section",{className:"w-full rounded-2xl bg-white p-7",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:n("allClassrooms")}),(0,r.jsx)(f,{classrooms:e,setClassrooms:s})]}),(0,r.jsx)("div",{className:"pt-5 items-center",children:t?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(b.default,{src:"/icons/math.gif",alt:"Loading...",width:40,height:40}),(0,r.jsx)("span",{className:"text-gray-400 mt-2",children:n("loadingClassrooms")})]}):(0,r.jsx)(x,{classrooms:e,setClassrooms:s})})]})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3623:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\hengs\\\\Desktop\\\\fyp\\\\frontend\\\\app\\\\(dashboard)\\\\school\\\\classrooms\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\page.tsx","default")},3873:e=>{"use strict";e.exports=require("path")},7175:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(2688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7520:(e,s,t)=>{Promise.resolve().then(t.bind(t,2560))},7792:(e,s,t)=>{Promise.resolve().then(t.bind(t,3623))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,9,658,598,751,219,648,610],()=>t(2067));module.exports=r})();