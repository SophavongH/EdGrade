(()=>{var e={};e.id=28,e.ids=[28],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1860:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2067:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(5239),a=s(8088),o=s(8170),n=s.n(o),i=s(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d={children:["",{children:["(dashboard)",{children:["school",{children:["classrooms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3623)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6675)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\page.tsx"],h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/school/classrooms/page",pathname:"/school/classrooms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(687),a=s(3210),o=s(7175);let n=(0,s(2688).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var i=s(4219),l=s(9384),d=s(9556),c=s(5814),h=s.n(c),u=s(3921);function m({classrooms:e,setClassrooms:t}){let[s,c]=(0,a.useState)(1),m=Math.ceil(e.length/8),p=(s-1)*8,f=e.slice(p,p+8),[x,b]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),[w,k]=(0,a.useState)(""),N=(0,a.useRef)(null),{t:C}=(0,u.o)(),$=e=>{j(e),k(e.name),b(!0)},E=e=>{j(e),y(!0)},S=async()=>{if(v){try{await (0,d.fi)(v.id,w),t(e=>e.map(e=>e.id===v.id?{...e,name:w}:e))}catch(e){console.error(e)}b(!1)}},P=async()=>{if(v){try{await (0,d.Ko)(v.id),t(e=>e.filter(e=>e.id!==v.id))}catch(e){console.error(e)}y(!1)}};return(0,r.jsxs)("div",{className:"space-y-4 relative",children:[(0,r.jsx)("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:(0,r.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-50 text-gray-600 uppercase text-xs hidden sm:table-header-group",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4",children:C("classroomName")}),(0,r.jsx)("th",{className:"px-6 py-4",children:C("totalStudents")}),(0,r.jsx)("th",{className:"px-6 py-4",children:C("view")}),(0,r.jsx)("th",{className:"px-6 py-4",children:C("action")})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 bg-white",children:f.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:(0,l.A)("w-8 h-8 rounded-full text-white flex items-center justify-center font-bold",e.color),children:e.name.charAt(0)}),(0,r.jsx)("div",{className:"text-sm font-medium",children:e.name})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.totalStudents}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(h(),{href:`/school/classrooms/${e.id}`,className:"text-blue-600 hover:underline cursor-pointer",children:C("viewClassroom")})}),(0,r.jsxs)("td",{className:"px-6 py-4 flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>$(e),className:"text-blue-500 hover:text-blue-700",children:(0,r.jsx)(o.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>E(e),className:"text-orange-500 hover:text-orange-600",children:(0,r.jsx)(n,{size:18})})]})]},e.id))})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 justify-center mt-4",children:[(0,r.jsx)(i.$,{className:"bg-[#25388C] hover:bg-[#1e2e6d]",onClick:()=>c(e=>Math.max(e-1,1)),disabled:1===s,children:C("previous")}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[C("page")," ",s," ",C("of")," ",m]}),(0,r.jsx)(i.$,{className:"bg-[#25388C] hover:bg-[#1e2e6d]",onClick:()=>c(e=>Math.min(e+1,m)),disabled:s===m,children:C("next")})]}),x&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",onClick:e=>{N.current&&!N.current.contains(e.target)&&b(!1)},children:(0,r.jsxs)("div",{ref:N,className:"bg-white p-6 rounded-lg shadow-md w-[90%] max-w-md",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)("h2",{className:"font-semibold text-lg",children:C("editClassroomName")})}),(0,r.jsx)("input",{className:"w-full px-4 py-2 border rounded-md mb-4",value:w,onChange:e=>k(e.target.value)}),(0,r.jsx)(i.$,{onClick:S,className:"w-full bg-[#25388C] hover:bg-[#1e2e6d]",children:C("save")})]})}),g&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md w-[90%] max-w-sm text-center",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800 mb-6",children:C("archiveConfirm")}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,r.jsx)(i.$,{variant:"secondary",onClick:()=>y(!1),children:C("cancel")}),(0,r.jsx)(i.$,{variant:"destructive",onClick:P,children:C("confirm")})]})]})})]})}var p=s(1860);let f=["bg-green-600","bg-blue-500","bg-amber-600","bg-rose-500","bg-sky-600","bg-neutral-800","bg-purple-600","bg-yellow-500","bg-teal-500","bg-indigo-600"];function x({classrooms:e,setClassrooms:t}){let[s,o]=(0,a.useState)(!1),[n,l]=(0,a.useState)(""),[c,h]=(0,a.useState)(""),m=(0,a.useRef)(null),{t:x}=(0,u.o)(),b=async()=>{let s=n.trim();if(""===s)return void h(x("classroomNameCannotBeEmpty"));if(e.some(e=>e.name.toLowerCase()===s.toLowerCase()))return void h(x("classroomNameAlreadyExists"));let r=f[Math.floor(Math.random()*f.length)];t([...e,await (0,d.ot)({name:s,color:r})]),o(!1),l("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.$,{onClick:()=>o(!0),className:"bg-[#25388C] hover:bg-[#1e2e6d] ",children:["+ ",x("createClassroom")]}),s&&(0,r.jsx)("div",{onClick:e=>{m.current&&!m.current.contains(e.target)&&o(!1)},className:"fixed inset-0 flex justify-center items-center z-50 bg-black/30 backdrop-blur-sm",children:(0,r.jsxs)("div",{ref:m,className:"bg-white rounded-xl p-6 shadow-lg relative w-[370px] max-w-[90vw]",children:[(0,r.jsx)("button",{onClick:()=>o(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black","aria-label":"Close",children:(0,r.jsx)(p.A,{size:20})}),(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:x("createClassroom")}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>{l(e.target.value),h("")},placeholder:x("classroomName"),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3 focus:outline-none focus:ring-2 focus:ring-[#25388C] text-base"}),c&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-2",children:c}),(0,r.jsx)(i.$,{onClick:b,className:"bg-[#25388C] hover:bg-[#1e2e6d] text-white w-full py-2 rounded-lg text-base font-medium",children:x("save")})]})})]})}var b=s(474);let g=()=>{let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),{t:n}=(0,u.o)();return(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,d.rq)();t(e)}catch(e){console.error("Failed to load classrooms",e)}finally{o(!1)}})()},[]),(0,r.jsxs)("section",{className:"w-full rounded-2xl bg-white p-7",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:n("allClassrooms")}),(0,r.jsx)(x,{classrooms:e,setClassrooms:t})]}),(0,r.jsx)("div",{className:"pt-5 items-center",children:s?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(b.default,{src:"/icons/math.gif",alt:"Loading...",width:40,height:40}),(0,r.jsx)("span",{className:"text-gray-400 mt-2",children:n("loadingClassrooms")})]}):(0,r.jsx)(m,{classrooms:e,setClassrooms:t})})]})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3623:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\hengs\\\\Desktop\\\\fyp\\\\frontend\\\\app\\\\(dashboard)\\\\school\\\\classrooms\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\page.tsx","default")},3873:e=>{"use strict";e.exports=require("path")},4219:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(687);s(3210);var a=s(1391),o=s(9384);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=o.$;var l=s(6241);let d=((e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return i(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(e=>{let t=null==s?void 0:s[e],r=null==o?void 0:o[e];if(null===t)return null;let i=n(t)||n(r);return a[e][i]}),d=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return i(e,l,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...o,...d}[t]):({...o,...d})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:t,size:s,asChild:o=!1,...n}){let i=o?a.DX:"button";return(0,r.jsx)(i,{"data-slot":"button",className:(0,l.cn)(d({variant:t,size:s,className:e})),...n})}},7175:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7520:(e,t,s)=>{Promise.resolve().then(s.bind(s,2560))},7792:(e,t,s)=>{Promise.resolve().then(s.bind(s,3623))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9556:(e,t,s)=>{"use strict";s.d(t,{C1:()=>f,KP:()=>x,Ko:()=>i,LP:()=>m,MV:()=>b,Nw:()=>S,QV:()=>N,Th:()=>$,VA:()=>l,VN:()=>c,bq:()=>E,dp:()=>u,ei:()=>y,fi:()=>n,kn:()=>k,m1:()=>j,nE:()=>d,nJ:()=>v,oC:()=>p,ot:()=>o,rq:()=>a,s5:()=>h,t:()=>C,uN:()=>w,zi:()=>g});let r="https://determined-passion-production-b403.up.railway.app/api",a=async()=>{let e=await fetch(`${r}/classrooms`,{headers:{}});if(!e.ok)throw Error("Failed to fetch classrooms");return e.json()},o=async e=>{let t=await fetch(`${r}/classrooms`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create classroom");return t.json()},n=async(e,t)=>{let s=await fetch(`${r}/classrooms/${e}`,{method:"PATCH",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify({name:t})});if(!s.ok)throw Error("Failed to update classroom");return s.json()},i=async e=>{let t=await fetch(`${r}/classrooms/${e}/archive`,{method:"PATCH",headers:{}});if(!t.ok)throw Error("Failed to archive classroom");return t.json()},l=async()=>{let e=await fetch(`${r}/classrooms/archived`,{headers:{}});if(!e.ok)throw Error("Failed to fetch archived classrooms");return e.json()},d=async e=>{let t=await fetch(`${r}/classrooms/${e}/unarchive`,{method:"PATCH",headers:{}});if(!t.ok)throw Error("Failed to unarchive classroom");return t.json()},c=async()=>{let e=await fetch(`${r}/students`,{headers:{}});if(!e.ok)throw Error("Failed to fetch students");return e.json()},h=async e=>{let t=await fetch(`${r}/students`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create student");return t.json()},u=async(e,t)=>{let s=await fetch(`${r}/students/${e}`,{method:"PUT",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update student");return s.json()},m=async e=>{let t=await fetch(`${r}/students/${e}`,{method:"DELETE",headers:{}});if(!t.ok)throw Error("Failed to delete student");return t.json()},p=async e=>{let t=await fetch(`${r}/students/${e}`,{headers:{}});if(!t.ok)throw Error("Failed to fetch student");return t.json()},f=async e=>{let t=await fetch(`${r}/classrooms/${e}`,{headers:{}});if(!t.ok)throw Error("Failed to fetch classroom");return t.json()},x=async e=>{let t=await fetch(`${r}/classrooms/${e}/students`,{headers:{}});if(!t.ok)throw Error("Failed to fetch classroom students");return t.json()},b=async(e,t)=>{let s=await fetch(`${r}/classrooms/${e}/students`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify({studentIds:t})});if(!s.ok)throw await s.json();return s.json()},g=async(e,t)=>{let s=await fetch(`${r}/classrooms/${e}/students/${t}`,{method:"DELETE",headers:{}});if(!s.ok)throw Error("Failed to remove student from classroom");return s.json()},y=async e=>{let t=await fetch(`${r}/report-cards/classrooms/${e}/report-cards`,{headers:{}});if(!t.ok)throw Error("Failed to fetch report cards");return t.json()},v=async(e,t)=>{let s=await fetch(`${r}/report-cards/classrooms/${e}/report-cards`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify({title:t})});if(!s.ok)throw Error("Failed to create report card");return s.json()},j=async e=>{let t=await fetch(`${r}/report-cards/${e}`,{method:"DELETE",headers:{}});if(!t.ok)throw Error("Failed to delete report card");return t.json()},w=async(e,t)=>{let s=await fetch(`${r}/report-cards/${e}/scores`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify({scores:t})});if(!s.ok)throw Error("Failed to save report card scores");return s.json()},k=async e=>{let t=await fetch(`${r}/report-cards/${e}/scores`,{headers:{}});if(!t.ok)throw Error("Failed to fetch report card scores");return t.json()},N=async(e,t)=>{let s=await fetch(`${r}/report-cards/${e}/send-sms`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},{}),body:JSON.stringify({studentIds:t})});if(!s.ok)throw Error("Failed to send SMS");return s.json()};async function C(){let e=localStorage.getItem("token"),t=await fetch(`${r}/user-subjects`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to fetch custom subjects");return t.json()}async function $(e){let t=localStorage.getItem("token"),s=await fetch(`${r}/user-subjects`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({subject:e})});if(!s.ok)throw Error("Failed to add subject");return s.json()}async function E(e){let t=localStorage.getItem("token"),s=await fetch(`${r}/user-subjects`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({subject:e})});if(!s.ok)throw Error("Failed to delete subject");return s.json()}async function S(e,t){let s=localStorage.getItem("token"),a=await fetch(`${r}/report-cards/${e}/subjects`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({subjects:t})});if(!a.ok)throw Error("Failed to save report card subjects");return a.json()}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,9,658,598,751,219,10,905],()=>s(2067));module.exports=r})();