(()=>{var e={};e.id=574,e.ids=[574],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1860:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2083:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o});var r=s(5239),a=s(8088),l=s(8170),n=s.n(l),d=s(893),i={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);s.d(t,i);let o={children:["",{children:["(dashboard)",{children:["school",{children:["classrooms",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5933)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6675)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\[id]\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/school/classrooms/[id]/page",pathname:"/school/classrooms/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\hengs\\\\Desktop\\\\fyp\\\\frontend\\\\app\\\\(dashboard)\\\\school\\\\classrooms\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\hengs\\Desktop\\fyp\\frontend\\app\\(dashboard)\\school\\classrooms\\[id]\\page.tsx","default")},7334:(e,t,s)=>{Promise.resolve().then(s.bind(s,8454))},8454:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(687),a=s(3210),l=s(6189),n=s(9556),d=s(4219),i=s(5711),o=s(1860),c=s(2688);let x=(0,c.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),h=(0,c.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var u=s(474),p=s(3921);function m({open:e,onClose:t,onAdd:s,students:l,selected:n,setSelected:i}){let[c,m]=(0,a.useState)(!1),[f,b]=(0,a.useState)(""),[g,v]=(0,a.useState)(null),[j,y]=(0,a.useState)([]),{t:w}=(0,p.o)(),N=e=>{i(n.includes(e)?n.filter(t=>t!==e):[...n,e])},C=async()=>{m(!0),v(null),y([]);try{let e=await s();e.alreadyAdded&&e.alreadyAdded.length>0?(y(e.alreadyAdded),v(w("studentAlreadyAdded")+"áŸ– "+e.alreadyAdded.map(e=>e.name).join(", "))):t()}catch(e){v(e?.error||w("successfullyAddedStudents"))}m(!1)},k=l.filter(e=>e.name.toLowerCase().includes(f.toLowerCase()));return e?(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/30 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg relative w-full max-w-md px-0 py-0",children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-6 right-6 text-gray-400 hover:text-black","aria-label":"Close",children:(0,r.jsx)(o.A,{size:32})}),(0,r.jsx)("div",{className:"pt-10 pb-2 flex flex-col items-center",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-[#25388C] text-center",style:{fontFamily:"inherit",letterSpacing:1},children:w("addStudents")})}),(0,r.jsx)("div",{className:"w-full px-8 pt-2 pb-2",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:f,onChange:e=>b(e.target.value),placeholder:w("searchingStudent"),className:"w-full rounded-lg border border-gray-300 px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-[#25388C] text-base"}),(0,r.jsx)(x,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]})}),g&&(0,r.jsx)("div",{className:"px-8 pb-2",children:(0,r.jsx)("div",{className:"bg-red-100 text-red-700 rounded-lg px-4 py-2 text-sm mb-2",children:g})}),(0,r.jsxs)("div",{className:"w-full px-8 pb-0 pt-2",children:[0===k.length&&(0,r.jsx)("div",{className:"text-center text-gray-400 py-8",children:w("noStudentsFound")}),(0,r.jsx)("div",{className:"flex flex-col gap-4 max-h-72 overflow-y-auto",children:k.map(e=>(0,r.jsxs)("div",{className:`flex items-center gap-4 px-4 py-3 rounded-xl cursor-pointer transition
                  ${n.includes(e.id)?"bg-[#F1F7FF] border-2 border-[#3B82F6]":"bg-[#F6F8FA] border border-transparent hover:border-[#B9C6E4]"}`,onClick:()=>N(e.id),children:[e.avatar?(0,r.jsx)(u.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"rounded-full object-cover w-12 h-12"}):(0,r.jsx)("span",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center font-bold text-lg text-green-700",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,r.jsx)("span",{className:"font-bold text-lg text-gray-900 flex-1",children:e.name}),n.includes(e.id)&&(0,r.jsx)(h,{size:32,className:"text-blue-500 flex-shrink-0",fill:"#3B82F6"})]},e.id))})]}),(0,r.jsx)("div",{className:"flex justify-center px-8 pt-8 pb-8",children:(0,r.jsx)(d.$,{className:`w-56 h-12 text-lg rounded-xl font-semibold
              ${0===n.length||c?"bg-[#B9C6E4] text-white cursor-not-allowed":"bg-[#25388C] hover:bg-[#1e2e6d] text-white"}`,onClick:C,disabled:c||0===n.length,children:c?w("adding"):w("add")})})]})}):null}function f({open:e,onClose:t,onCreate:s}){let[l,n]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),u=(0,a.useRef)(null),{t:m}=(0,p.o)(),f=async e=>{if(e.preventDefault(),!l.trim())return void c(m("reportCardNameCannotBeEmpty"));h(!0),c("");try{await s(l.trim()),t()}catch{c(m("failedToCreateReportCard"))}finally{h(!1)}};return e?(0,r.jsx)("div",{onClick:e=>{u.current&&!u.current.contains(e.target)&&t()},className:"fixed inset-0 flex justify-center items-center z-50 bg-black/30 backdrop-blur-sm",children:(0,r.jsxs)("div",{ref:u,className:"bg-white rounded-xl p-6 shadow-lg relative w-[370px] max-w-[90vw]",children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-black","aria-label":"Close",children:(0,r.jsx)(o.A,{size:20})}),(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:m("createReportCard")}),(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsx)("input",{type:"text",value:l,onChange:e=>{n(e.target.value),c("")},placeholder:m("reportCardName"),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3 focus:outline-none focus:ring-2 focus:ring-[#25388C] text-base"}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-2",children:i}),(0,r.jsx)(d.$,{type:"submit",className:"bg-[#25388C] hover:bg-[#1e2e6d] text-white w-full py-2 rounded-lg text-base font-medium",disabled:x,children:x?m("creating"):m("create")})]})]})}):null}var b=s(7175),g=s(6362),v=s(5814),j=s.n(v);let y=({id:e})=>{let[t,s]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),{t:i}=(0,p.o)();return((0,a.useEffect)(()=>{d(!0),(0,n.C1)(e).then(e=>{s(e),d(!1)}).catch(()=>{s(null),d(!1)})},[e]),l)?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(u.default,{src:"/icons/math.gif",alt:"Loading...",width:40,height:40}),(0,r.jsx)("span",{className:"text-gray-400 mt-2",children:i("loading")})]}):t?(0,r.jsx)("span",{className:"text-xl font-semibold",children:t.name}):(0,r.jsx)("span",{className:"text-red-500",children:i("classroomNotFound")})},w=()=>{let[e,t]=(0,a.useState)(0),s=(0,l.useParams)(),{t:o}=(0,p.o)(),[c,x]=(0,a.useState)(!1),[h,u]=(0,a.useState)([]),[v,w]=(0,a.useState)([]),[N,C]=(0,a.useState)([]),[k,A]=(0,a.useState)([]),[S,P]=(0,a.useState)(!1),[z,_]=(0,a.useState)(null);(0,a.useEffect)(()=>{c&&(0,n.VN)().then(u)},[c]),(0,a.useEffect)(()=>{s.id&&(0,n.KP)(s.id).then(C)},[s.id,c]),(0,a.useEffect)(()=>{s.id&&(0,n.ei)(s.id).then(A)},[s.id,S]);let $=async()=>{let e=await (0,n.MV)(s.id,v);return e.alreadyAdded&&0!==e.alreadyAdded.length||(x(!1),w([]),(0,n.KP)(s.id).then(C)),e},E=async e=>{await (0,n.nJ)(s.id,e),P(!1),(0,n.ei)(s.id).then(A)},F=async()=>{z&&(await (0,n.m1)(z),_(null),(0,n.ei)(s.id).then(A))};return(0,r.jsxs)("section",{className:"w-full rounded-2xl bg-white p-7",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:"string"==typeof s.id&&(0,r.jsx)(y,{id:s.id})}),(0,r.jsx)("div",{className:"mt-4 pt-3",children:(0,r.jsxs)("div",{className:"bg-[#fafbfc] rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 mb-6",children:[(0,r.jsxs)("div",{className:"flex gap-8",children:[(0,r.jsx)("button",{className:`pb-2 font-semibold text-base focus:outline-none ${0===e?"border-b-2 border-black text-black":"text-gray-400 hover:text-black"}`,onClick:()=>t(0),children:o("reportCard")}),(0,r.jsx)("button",{className:`pb-2 text-base focus:outline-none ${1===e?"border-b-2 border-black text-black font-semibold":"text-gray-400 hover:text-black"}`,onClick:()=>t(1),children:o("students")})]}),(0,r.jsxs)("div",{children:[0===e&&(0,r.jsxs)(d.$,{className:"bg-[#25388C] hover:bg-[#1e2e6d] text-white font-medium text-sm flex items-center gap-2 px-4 py-2 rounded-lg",onClick:()=>P(!0),children:[(0,r.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 18 18",children:(0,r.jsx)("path",{d:"M9 4v10M4 9h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),o("createReportCard")]}),1===e&&(0,r.jsxs)(d.$,{className:"bg-[#25388C] hover:bg-[#1e2e6d] text-white font-medium text-sm flex items-center gap-2 px-4 py-2 rounded-lg",onClick:()=>x(!0),children:[(0,r.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 18 18",children:(0,r.jsx)("path",{d:"M9 4v10M4 9h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),o("addStudentToClassroom")]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[0===e&&(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex items-center px-4 py-2 bg-[#f7f8ff] rounded-t-xl border-b border-gray-200",children:[(0,r.jsx)("div",{className:"flex-1 font-semibold text-sm text-gray-500",children:o("reportCard")}),(0,r.jsx)("div",{className:"w-32 text-right font-semibold text-sm text-gray-500",children:o("action")})]}),(0,r.jsxs)("div",{className:"divide-y divide-gray-100 bg-white rounded-b-xl",children:[0===k.length&&(0,r.jsx)("div",{className:"text-gray-400 text-center py-8",children:o("noReportCardsYet")}),k.map(e=>(0,r.jsxs)("div",{className:"flex items-center px-4 py-3",children:[(0,r.jsx)("div",{className:"flex-1 font-bold text-base text-[#25388C]",children:e.title}),(0,r.jsxs)("div",{className:"w-32 flex justify-end gap-2",children:[(0,r.jsx)(d.$,{asChild:!0,className:"text-blue-500 hover:text-blue-700 p-2 rounded-full hover:bg-blue-50 transition",title:o("edit"),variant:"ghost",size:"icon",children:(0,r.jsx)(j(),{href:`/school/classrooms/${s.id}/report-cards/${e.id}`,children:(0,r.jsx)(b.A,{size:20})})}),(0,r.jsx)(d.$,{className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-50 transition",onClick:()=>_(e.id),title:o("delete"),variant:"ghost",size:"icon",children:(0,r.jsx)(g.A,{size:20})})]})]},e.id))]})]})}),1===e&&(0,r.jsx)(i.A,{students:N,setStudents:C,classroomId:s.id})]})]})}),(0,r.jsx)(m,{open:c,onClose:()=>x(!1),onAdd:$,students:h,selected:v,setSelected:w}),(0,r.jsx)(f,{open:S,onClose:()=>P(!1),onCreate:E}),null!==z&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/30 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-8 shadow-lg w-[350px] max-w-[90vw] flex flex-col items-center",children:[(0,r.jsx)("div",{className:"font-bold text-lg mb-6 text-center",children:o("deleteReportCardConfirm")}),(0,r.jsxs)("div",{className:"flex gap-4 w-full justify-center",children:[(0,r.jsx)(d.$,{className:"bg-gray-400 hover:bg-gray-500 text-white w-32",onClick:()=>_(null),children:o("cancel")}),(0,r.jsx)(d.$,{className:"bg-red-500 hover:bg-red-600 text-white w-32",onClick:F,children:o("delete")})]})]})})]})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9801:(e,t,s)=>{Promise.resolve().then(s.bind(s,5933))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,9,658,598,751,219,10,905,711],()=>s(2083));module.exports=r})();