{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hengs/Desktop/fyp/frontend/app/report/%5Btoken%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function ReportViewPage() {\r\n  const { token } = useParams();\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const [report, setReport] = useState<any>(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:4000\";\r\n    fetch(`${apiUrl}/api/report/${token}`)\r\n      .then((res) =>\r\n        res.ok ? res.json() : Promise.reject(\"Invalid or expired link\")\r\n      )\r\n      .then(setReport)\r\n      .catch(() => setError(\"This link is invalid or has already been used.\"));\r\n  }, [token]);\r\n\r\n  if (error) return <div className=\"text-red-500\">{error}</div>;\r\n  if (!report) return <div>Loading...</div>;\r\n\r\n  const student = report.student || {};\r\n  const score = report.score || {};\r\n  const subjects = Object.entries(score).filter(\r\n    ([key]) => ![\"rank\", \"grade\", \"total\", \"average\", \"absent\"].includes(key)\r\n  );\r\n\r\n  return (\r\n    <div className=\"max-w-xs mx-auto bg-white rounded-2xl shadow-lg p-4 mt-4 border-2 border-blue-100 font-[Kantumruy]\">\r\n      {/* Logo */}\r\n      <div className=\"flex items-center gap-2 mb-2\">\r\n        <Image\r\n          src=\"/icons/admin/logo.svg\"\r\n          alt=\"EdGrade\"\r\n          width={32}\r\n          height={32}\r\n          className=\"w-8 h-8\"\r\n        />\r\n        <span className=\"text-[#25388C] font-bold text-2xl\">EdGrade</span>\r\n      </div>\r\n      <hr className=\"my-2 border-dotted border-gray-300\" />\r\n\r\n      {/* Avatar and Info */}\r\n      <div className=\"flex items-center gap-4 mb-4\">\r\n        <div className=\"w-24 h-24 rounded-full bg-orange-200 overflow-hidden flex items-center justify-center border-4 border-white shadow\">\r\n          {student.avatar ? (\r\n            <Image\r\n              src={\r\n                student.avatar.startsWith(\"http\") || student.avatar.startsWith(\"data:\")\r\n                  ? student.avatar\r\n                  : `https://ik.imagekit.io/edgrade/${student.avatar}`\r\n              }\r\n              alt={student.name || \"Student\"}\r\n              width={96}\r\n              height={96}\r\n              className=\"w-24 h-24 object-cover rounded-full\"\r\n              unoptimized\r\n            />\r\n          ) : (\r\n            <span className=\"text-4xl font-bold text-white select-none\">\r\n              {student.name\r\n                ? student.name\r\n                    .split(\" \")\r\n                    .map((n: string) => n[0])\r\n                    .join(\"\")\r\n                    .toUpperCase()\r\n                : \"?\"}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <div className=\"font-bold\">\r\n          <div>Name: {student.name || \"-\"}</div>\r\n          <div>{student.gender || \"\"}</div>\r\n          <div className=\"text-xs\">{student.id || \"\"}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n\r\n      <div className=\"flex bg-gray-600 text-white px-3 py-2 rounded-t font-bold\">\r\n        <div>\r\n          Subject\r\n        </div> \r\n        <div className=\"ml-auto\">\r\n          Score\r\n        </div>\r\n      </div>\r\n      <table className=\"w-full border-collapse\">\r\n        <tbody>\r\n          {subjects.map(([subject, value], idx) => (\r\n            <tr key={subject} className={idx % 2 === 0 ? \"bg-gray-100\" : \"\"}>\r\n              <td className=\"px-2 py-1 text-[15px]\">{subject}</td>\r\n              <td className=\"px-2 py-1 text-right\">{String(value)}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Summary */}\r\n      <div className=\"flex justify-between mt-4 text-[15px]\">\r\n        <div>\r\n          <div>\r\n            Grade: <span className=\"font-bold\">{score.grade || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            Absent: <span className=\"font-bold\">{score.absent || \"0\"}</span>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <div>\r\n            Total Scores: <span className=\"font-bold\">{score.total || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            Total Students: <span className=\"font-bold\">{score.rank || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            Average:{\" \"}\r\n            <span className=\"font-bold\">{score.average || \"-\"}</span>\r\n          </div>\r\n          <div>\r\n            Ranking: <span className=\"font-bold\">{score.rank || \"-\"}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;AAYmB;;AAXnB;AACA;AACA;;;AAHA;;;;AAKe,SAAS;;IACtB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAC1B,8DAA8D;IAC9D,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAO;IAC1C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,MAAM,SAAS,6DAAmC;YAClD,MAAM,GAAG,OAAO,YAAY,EAAE,OAAO,EAClC,IAAI;4CAAC,CAAC,MACL,IAAI,EAAE,GAAG,IAAI,IAAI,KAAK,QAAQ,MAAM,CAAC;2CAEtC,IAAI,CAAC,WACL,KAAK;4CAAC,IAAM,SAAS;;QAC1B;mCAAG;QAAC;KAAM;IAEV,IAAI,OAAO,qBAAO,6LAAC;QAAI,WAAU;kBAAgB;;;;;;IACjD,IAAI,CAAC,QAAQ,qBAAO,6LAAC;kBAAI;;;;;;IAEzB,MAAM,UAAU,OAAO,OAAO,IAAI,CAAC;IACnC,MAAM,QAAQ,OAAO,KAAK,IAAI,CAAC;IAC/B,MAAM,WAAW,OAAO,OAAO,CAAC,OAAO,MAAM,CAC3C,CAAC,CAAC,IAAI,GAAK,CAAC;YAAC;YAAQ;YAAS;YAAS;YAAW;SAAS,CAAC,QAAQ,CAAC;IAGvE,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,gIAAA,CAAA,UAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;;;;;;kCAEZ,6LAAC;wBAAK,WAAU;kCAAoC;;;;;;;;;;;;0BAEtD,6LAAC;gBAAG,WAAU;;;;;;0BAGd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACZ,QAAQ,MAAM,iBACb,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KACE,QAAQ,MAAM,CAAC,UAAU,CAAC,WAAW,QAAQ,MAAM,CAAC,UAAU,CAAC,WAC3D,QAAQ,MAAM,GACd,CAAC,+BAA+B,EAAE,QAAQ,MAAM,EAAE;4BAExD,KAAK,QAAQ,IAAI,IAAI;4BACrB,OAAO;4BACP,QAAQ;4BACR,WAAU;4BACV,WAAW;;;;;iDAGb,6LAAC;4BAAK,WAAU;sCACb,QAAQ,IAAI,GACT,QAAQ,IAAI,CACT,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAc,CAAC,CAAC,EAAE,EACvB,IAAI,CAAC,IACL,WAAW,KACd;;;;;;;;;;;kCAIV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;oCAAI;oCAAO,QAAQ,IAAI,IAAI;;;;;;;0CAC5B,6LAAC;0CAAK,QAAQ,MAAM,IAAI;;;;;;0CACxB,6LAAC;gCAAI,WAAU;0CAAW,QAAQ,EAAE,IAAI;;;;;;;;;;;;;;;;;;0BAM5C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAI;;;;;;kCAGL,6LAAC;wBAAI,WAAU;kCAAU;;;;;;;;;;;;0BAI3B,6LAAC;gBAAM,WAAU;0BACf,cAAA,6LAAC;8BACE,SAAS,GAAG,CAAC,CAAC,CAAC,SAAS,MAAM,EAAE,oBAC/B,6LAAC;4BAAiB,WAAW,MAAM,MAAM,IAAI,gBAAgB;;8CAC3D,6LAAC;oCAAG,WAAU;8CAAyB;;;;;;8CACvC,6LAAC;oCAAG,WAAU;8CAAwB,OAAO;;;;;;;2BAFtC;;;;;;;;;;;;;;;0BASf,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;;oCAAI;kDACI,6LAAC;wCAAK,WAAU;kDAAa,MAAM,KAAK,IAAI;;;;;;;;;;;;0CAErD,6LAAC;;oCAAI;kDACK,6LAAC;wCAAK,WAAU;kDAAa,MAAM,MAAM,IAAI;;;;;;;;;;;;;;;;;;kCAGzD,6LAAC;;0CACC,6LAAC;;oCAAI;kDACW,6LAAC;wCAAK,WAAU;kDAAa,MAAM,KAAK,IAAI;;;;;;;;;;;;0CAE5D,6LAAC;;oCAAI;kDACa,6LAAC;wCAAK,WAAU;kDAAa,MAAM,IAAI,IAAI;;;;;;;;;;;;0CAE7D,6LAAC;;oCAAI;oCACM;kDACT,6LAAC;wCAAK,WAAU;kDAAa,MAAM,OAAO,IAAI;;;;;;;;;;;;0CAEhD,6LAAC;;oCAAI;kDACM,6LAAC;wCAAK,WAAU;kDAAa,MAAM,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhE;GA5HwB;;QACJ,qIAAA,CAAA,YAAS;;;KADL","debugId":null}}]
}